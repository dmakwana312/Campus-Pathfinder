(this.webpackJsonpfinal=this.webpackJsonpfinal||[]).push([[0],{240:function(e,t,a){},241:function(e,t,a){},429:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(23),o=a.n(r),c=(a(240),a.p,a(241),a(10)),l=a(219),s=a(509),d=a(477),u=a(478),h=a(507),p=a(26),j=a(154);j.a.initializeApp({apiKey:"AIzaSyAipzrwFNyQvJiTH5d04RTMwdzNiXfOfSk",authDomain:"final-year-project-b1bae.firebaseapp.com",projectId:"final-year-project-b1bae",storageBucket:"final-year-project-b1bae.appspot.com",messagingSenderId:"969475175305",appId:"1:969475175305:web:115f57cdcc366118862758"});var b=j.a,f=a(506),g=Object(f.a)(null),x=function(e){g.set(e)},m=a(160),O=Object(m.a)((function(e){return{content:{textAlign:"center",display:"inline-block"},root:{display:"flex",overflowY:"hidden",overflowX:"hidden"},canvas:{backgroundColor:"#e6e5e3",width:"calc(100vw - 500px);",height:"calc(100vh - 170px);"},createMapHeadingContainer:{width:100},createMapHeading:{width:100},propertiesForm:{display:"flex",flexWrap:"wrap",alignItems:"center",justify:"center"},propertiesFormDisabled:{filter:"blur(5px)"},modalButton:{marginTop:20},propertiesFormDisabledText:{position:"absolute",textAlign:"center"},textField:{margin:e.spacing(1),marginBottom:e.spacing(0),width:"100%",justifyContent:"center"},positionTextField:{width:"9.7ch",borderColor:"blue"},modalContent:{position:"absolute",backgroundColor:e.palette.background.paper,border:"2px solid #000",padding:e.spacing(2,4,3),top:"50%",left:"50%",transform:"translate(-50%, -50%)"},viewMapCanvas:{backgroundColor:"#e6e5e3",overflow:"hidden"},paper:{zIndex:1e3,position:"absolute",margin:e.spacing(1),padding:e.spacing(2)},paperComponent:{margin:e.spacing(1)},createMapAppBar:{zIndex:e.zIndex.drawer+1},list:{width:200},button:{marginRight:30,cursor:"pointer"},sideBarIcon:{padding:0,color:"white",cursor:"pointer"},paperTabs:{flexGrow:1},tab:{minWidth:90},drawer:{width:250,flexShrink:0,zIndex:e.zIndex.appBar-1},drawerPaper:{width:250},formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)},centerPaper:{position:"absolute",top:"50%",right:"50%",transform:"translate(50%,-50%)",margin:e.spacing(1),padding:e.spacing(2)},form:{width:"30ch",margin:e.spacing(1),marginRight:e.spacing(3)},formTextfield:{width:"30ch",margin:e.spacing(1)},registerText:{display:"block",marginLeft:"auto",marginRight:"auto",width:"80%",marginBottom:10},resetPasswordText:{display:"block",marginLeft:"auto",marginRight:"auto",width:150,paddingLeft:20},speedDial:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)}}})),v=a(2),y=function(){var e=O(),t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],o=a[1],j=Object(n.useState)(!1),f=Object(c.a)(j,2),m=f[0],y=f[1],w=Object(n.useState)(""),C=Object(c.a)(w,2),S=C[0],k=C[1],P=Object(n.useState)(""),D=Object(c.a)(P,2),N=D[0],F=D[1],M=Object(n.useState)(""),B=Object(c.a)(M,2),R=B[0],T=B[1],A=Object(n.useState)(""),E=Object(c.a)(A,2),L=E[0],I=E[1],V=Object(n.useState)(""),z=Object(c.a)(V,2),X=z[0],H=z[1],W=Object(n.useState)(""),G=Object(c.a)(W,2),Y=G[0],K=G[1],J=Object(n.useState)(""),q=Object(c.a)(J,2),U=q[0],Q=q[1],$=Object(n.useState)(""),Z=Object(c.a)($,2),_=Z[0],ee=Z[1];return Object(n.useEffect)((function(){F(""),I(""),K("")}),[r]),Object(n.useEffect)((function(){b.auth().onAuthStateChanged((function(e){x(e||null)}))}),[]),Object(v.jsxs)(i.a.Fragment,{children:[function(){if(null!==g.use())return Object(v.jsx)(p.a,{to:"/admin"})}(),Object(v.jsxs)(l.a,{className:e.centerPaper,elevation:10,children:[Object(v.jsxs)("form",{className:e.form,children:[Object(v.jsx)(s.a,{id:"emailLogin",error:""!==N,helperText:N,className:e.formTextfield,label:"Email",variant:"outlined",onChange:function(e){return k(e.target.value)}}),Object(v.jsx)(s.a,{id:"passwordLogin",error:""!==L,helperText:L,className:e.formTextfield,type:"password",label:"Password",variant:"outlined",onChange:function(e){return T(e.target.value)}}),Object(v.jsx)(d.a,{id:"resetPasswordHint",color:"primary",className:e.resetPasswordText,href:"#",onClick:function(e){e.preventDefault(),y(!0)},children:"Forgotten Password"}),Object(v.jsx)(u.a,{id:"loginButton",style:{margin:18,width:"30ch",marginBottom:10},variant:"contained",color:"primary",onClick:function(){b.auth().signInWithEmailAndPassword(S,R).catch((function(e){switch(e.code){case"auth/invalid-email":case"auth/user-disabled":case"auth/user-not-found":F(e.message);break;case"auth/wrong-password":I(e.message)}}))},children:"Login"})]}),Object(v.jsx)(d.a,{id:"registerHint",color:"primary",className:e.registerText,href:"#",onClick:function(e){e.preventDefault(),o(!0)},children:"Dont Have An Account? Register"})]}),r&&Object(v.jsx)(h.a,{open:!0,onClose:function(){return o(!1)},id:"registerModal",children:Object(v.jsx)("div",{className:e.modalContent,children:Object(v.jsxs)(l.a,{className:e.centerPaper,children:[Object(v.jsx)(u.a,{onClick:function(){return o(!1)},style:{position:"absolute",top:0,right:0,margin:10},children:"X"}),Object(v.jsxs)("form",{className:e.form,style:{marginTop:20},children:[Object(v.jsx)(s.a,{id:"emailRegister",error:""!==N,helperText:N,className:e.formTextfield,label:"Email",variant:"outlined",onChange:function(e){return k(e.target.value)}}),Object(v.jsx)(s.a,{id:"passwordRegister",error:""!==L,helperText:L,className:e.formTextfield,type:"password",label:"Password",variant:"outlined",onChange:function(e){return T(e.target.value)}}),Object(v.jsx)(s.a,{id:"passwordRegisterConfirm",error:""!==Y,helperText:Y,className:e.formTextfield,type:"password",label:"Confirm Password",variant:"outlined",onChange:function(e){return H(e.target.value)}}),Object(v.jsx)(u.a,{id:"registerButton",style:{margin:18,width:"30ch",marginBottom:0},variant:"contained",color:"primary",onClick:function(){R===X?b.auth().createUserWithEmailAndPassword(S,R).catch((function(e){switch(e.code){case"auth/email-already-in-use":case"auth/invalid-email":F(e.message);break;case"auth/weak-password":I(e.message)}})):(I("Passwords Do Not Match"),K("Passwords Do Not Match"))},children:"Register"})]})]})})}),m&&Object(v.jsx)(h.a,{open:!0,onClose:function(){return y(!1)},id:"resetPasswordModal",children:Object(v.jsx)("div",{className:e.modalContent,children:Object(v.jsxs)(l.a,{className:e.centerPaper,children:[Object(v.jsx)(u.a,{onClick:function(){return y(!1)},style:{position:"absolute",top:0,right:0,margin:10},children:"X"}),Object(v.jsxs)("form",{className:e.form,style:{marginTop:20},children:[Object(v.jsx)(s.a,{id:"emailResetPasswordTextField",error:""!==_,helperText:_,className:e.formTextfield,label:"Email",variant:"outlined",onChange:function(e){return Q(e.target.value)}}),Object(v.jsx)(u.a,{id:"resetPasswordButton",style:{margin:18,width:"30ch",marginBottom:0},variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),ee(""),""!==U?b.auth().sendPasswordResetEmail(U).then((function(){alert("Reset Password Link Sent To Email. Please Check Your Junk Folder As Well")})).catch((function(e){ee(e.message)})):ee("Please Enter Email")},children:"Reset Password"})]})]})})})]})},w=a(29),C=a(479),S=a(480),k=a(481),P=a(482),D=a(91),N=a(508),F=a(476),M=a(435),B=a(122),R=a.n(B),T=function(e){var t=Object(w.a)(),a=Object(C.a)(t.breakpoints.down("sm")),i=O(),r=Object(n.useState)(!1),o=Object(c.a)(r,2),l=o[0],s=o[1],d=g.use();function h(){b.auth().signOut(),x(null)}return a?Object(v.jsxs)("div",{children:[Object(v.jsx)(S.a,{children:Object(v.jsx)(k.a,{children:Object(v.jsxs)(P.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",children:[Object(v.jsx)(R.a,{className:i.sideBarIcon,onClick:function(){s(!0)}}),Object(v.jsx)(D.a,{color:"inherit",children:"Capus Pathfinder"}),Object(v.jsx)(D.a,{color:"inherit"})]})})}),Object(v.jsx)(N.a,{open:l,onClose:function(){s(!1)},onOpen:function(){s(!0)},children:Object(v.jsx)("div",{tabIndex:0,role:"button",onClick:function(){s(!1)},onKeyDown:function(){s(!1)},children:Object(v.jsxs)(F.a,{className:i.list,children:[Object(v.jsx)(M.a,{id:"createMapLink",button:!0,divider:!0,onClick:function(e){return window.location.href="#/createmap"},children:"Create Map Map "},1),Object(v.jsx)(M.a,{id:"viewMapLink",button:!0,divider:!0,onClick:function(e){return window.location.href="#/viewmap"},children:"View Map "},2),Object(v.jsx)(M.a,{id:"viewAdminLink",button:!0,divider:!0,onClick:function(e){return window.location.href="#/admin"},children:"Admin "},3),Object(v.jsxs)(M.a,{id:"loginLogoutButton",button:!0,divider:!0,onClick:null===d?function(){}:h,children:[null===d?"Login":"Logout"," "]},4)]})})})]}):Object(v.jsx)(S.a,{children:Object(v.jsxs)(k.a,{children:[Object(v.jsx)(D.a,{style:{flexGrow:1},color:"inherit",children:"Capus Pathfinder"}),Object(v.jsx)(u.a,{id:"createMapLink",className:i.button,color:"inherit",onClick:function(e){return window.location.href="#/createmap"},children:"Create Map"}),Object(v.jsx)(u.a,{id:"viewMapLink",className:i.button,color:"inherit",onClick:function(e){return window.location.href="#/viewmap"},children:"View Map"}),Object(v.jsx)(u.a,{id:"viewAdminLink",className:i.button,color:"inherit",onClick:function(e){return window.location.href="#/admin"},children:"Admin"}),Object(v.jsx)(u.a,{id:"loginLogoutButton",className:i.button,color:"inherit",onClick:null===d?function(){}:h,children:null===d?"Login":"Logout"})]})})},A=Object(m.a)((function(e){return{page:{position:"absolute",top:0,right:0,bottom:0,left:0,background:"#e3e3e3"}}})),E=function(){var e=A();return Object(v.jsxs)("div",{className:e.page,children:[function(){if(null===g.use())return Object(v.jsx)(p.a,{to:"/"})}(),Object(v.jsx)(T,{}),Object(v.jsx)(y,{})]})},L=a(15),I=a(22),V=a(493),z=a(494),X=a(495),H=a(496),W=a(497),G=a(498),Y=function(e){var t=Object(w.a)(),a=Object(C.a)(t.breakpoints.down("sm")),i=O(),r=Object(n.useState)(!1),o=Object(c.a)(r,2),l=o[0],s=o[1];function d(){b.auth().signOut(),x(null)}return a?Object(v.jsxs)("div",{children:[Object(v.jsx)(S.a,{className:i.createMapAppBar,children:Object(v.jsx)(k.a,{children:Object(v.jsxs)(P.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",children:[Object(v.jsx)(R.a,{className:i.sideBarIcon,onClick:function(){s(!0)}}),Object(v.jsx)(D.a,{color:"inherit",children:"Capus Pathfinder"}),Object(v.jsx)(D.a,{color:"inherit"})]})})}),Object(v.jsx)(N.a,{open:l,onClose:function(){s(!1)},onOpen:function(){s(!0)},children:Object(v.jsx)("div",{tabIndex:0,role:"button",onClick:function(){s(!1)},onKeyDown:function(){s(!1)},children:Object(v.jsxs)(F.a,{className:i.list,children:[Object(v.jsx)(M.a,{id:"previousStepLink",onClick:e.decrementStep,button:!0,divider:!0,children:" Previous Step "},1),Object(v.jsx)(M.a,{id:"nextStepLink",onClick:e.incrementStep,button:!0,divider:!0,children:" Next Step "},2),Object(v.jsxs)(M.a,{id:"loginLogoutButton",button:!0,divider:!0,onClick:null===g?function(){}:d,children:[null===g?"Login":"Logout"," "]},3)]})})})]}):Object(v.jsx)(S.a,{className:i.createMapAppBar,children:Object(v.jsxs)(k.a,{children:[Object(v.jsx)(D.a,{style:{flexGrow:1},color:"inherit",children:"Capus Pathfinder"}),Object(v.jsx)(u.a,{id:"previousStepLink",onClick:e.decrementStep,className:i.button,color:"inherit",children:"Previous Step"}),Object(v.jsx)(u.a,{id:"nextStepLink",onClick:e.incrementStep,className:i.button,color:"inherit",children:"Next Step"}),Object(v.jsx)(u.a,{id:"loginLogoutButton",className:i.button,color:"inherit",onClick:null===g?function(){}:d,children:null===g?"Login":"Logout"})]})})},K=a(483),J=a(48),q=a(484),U=function(e){var t=O();return Object(v.jsxs)(J.a,{className:t.drawer,variant:"permanent",classes:{paper:t.drawerPaper},anchor:"left",children:[Object(v.jsx)(k.a,{}),Object(v.jsxs)("div",{className:t.drawerContainer,children:[0===e.activeStep?Object(v.jsxs)(F.a,{children:[Object(v.jsx)(M.a,{id:"createBuilding",button:!0,onClick:function(){e.buttonClick("building")},children:Object(v.jsx)(K.a,{primary:"Building"})},"building"),Object(v.jsx)(M.a,{id:"createPath",button:!0,onClick:function(){e.buttonClick("path")},children:Object(v.jsx)(K.a,{primary:"Path"})},"path")]}):function(){var t=null===e.buildingBeingViewed;return Object(v.jsxs)(F.a,{children:[Object(v.jsx)(M.a,{id:"createEntrance",disabled:t,button:!0,onClick:function(){e.buttonClick("entrance")},children:Object(v.jsx)(K.a,{primary:"Entrance"})},"entrance"),Object(v.jsx)(M.a,{id:"createRoom",disabled:t,button:!0,onClick:function(){e.buttonClick("room")},children:Object(v.jsx)(K.a,{primary:"Room"})},"room"),Object(v.jsx)(M.a,{id:"createStaircase",disabled:t,button:!0,onClick:function(){e.buttonClick("stairs")},children:Object(v.jsx)(K.a,{primary:"Staircase"})},"stairs"),Object(v.jsx)(M.a,{id:"createLift",disabled:t,button:!0,onClick:function(){e.buttonClick("lifts")},children:Object(v.jsx)(K.a,{primary:"Lift"})},"lift"),Object(v.jsx)(M.a,{id:"createPath",disabled:t,button:!0,onClick:function(){e.buttonClick("path")},children:Object(v.jsx)(K.a,{primary:"Path"})},"path")]})}(),Object(v.jsx)(q.a,{})]})]})},Q=a(39),$=a(6),Z=a(475),_=a(510),ee=a(501),te=a(473),ae=a(515),ne=a(485),ie=a(502),re=a(490),oe=a(514),ce=a(486),le=a(487),se=a(488),de=a(489),ue=a(123),he=a.n(ue),pe=a(206),je=a.n(pe),be=function(e){var t=O(),a=Object(n.useState)(0),i=Object(c.a)(a,2),r=i[0],o=i[1],d=Object(n.useState)([]),h=Object(c.a)(d,2),p=h[0],j=h[1],b=Object(n.useState)(""),f=Object(c.a)(b,2),g=f[0],x=f[1],m=0===e.activeStep?t.drawerContainer+" "+t.propertiesForm:t.drawerContainer,y=!e.properties,w=e.properties?"":t.propertiesFormDisabled;if(e.properties&&g!==e.properties.index&&(x(e.properties.index),"lifts"===e.properties.name||"stairs"===e.properties.name)){for(var C=[],S=0;S<e.properties.floors.length;S++)e.properties.floors[S]&&C.push("Floor "+S);j([].concat(C))}function D(t,a){e.updateProperty(a,t.target.value)}function N(t){j(t.target.value);for(var a=[],n=0;n<t.target.value.length;n++)a.push(parseInt(t.target.value[n].split(" ")[1]));e.updateLiftStaircaseAccessibility(e.properties.name,a,e.properties.index)}function B(e){var t=e.children,a=e.value,n=e.index,i=Object($.a)(e,["children","value","index"]);return Object(v.jsx)("div",Object(Q.a)(Object(Q.a)({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},i),{},{children:a===n&&Object(v.jsx)("div",{children:t})}))}return Object(v.jsxs)(J.a,{className:t.drawer,variant:"permanent",classes:{paper:t.drawerPaper},anchor:"right",children:[Object(v.jsx)(k.a,{}),Object(v.jsxs)(l.a,{className:t.paperTabs,children:[Object(v.jsxs)(ie.a,{value:r,onChange:function(e,t){o(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"on",children:[Object(v.jsx)(re.a,{classes:{root:t.tab},label:"Properties"}),Object(v.jsx)(re.a,{classes:{root:t.tab},disabled:0===e.activeStep,label:"Buildings"}),Object(v.jsx)(re.a,{classes:{root:t.tab},disabled:0===e.activeStep,label:"Floors"})]}),Object(v.jsxs)(je.a,{axis:"x-reverse",index:r,onChangeIndex:function(e){o(e)},children:[Object(v.jsx)(B,{value:r,index:0,children:Object(v.jsxs)("div",{className:t.drawerContainer+" "+t.propertiesForm,children:[Object(v.jsxs)(F.a,{className:w,children:[0===e.activeStep&&Object(v.jsx)(u.a,{onClick:e.deleteSelected,style:{backgroundColor:"red",marginTop:20,marginBottom:20,marginLeft:20,marginRight:20,width:"85%"},variant:"contained",children:"Delete"}),e.properties&&("lifts"===e.properties.name||"stairs"===e.properties.name)&&Object(v.jsx)(M.a,{children:Object(v.jsxs)(Z.a,{className:t.formControl,children:[Object(v.jsx)(_.a,{children:"Chip"}),Object(v.jsx)(ee.a,{multiple:!0,value:p,onChange:N,input:Object(v.jsx)(te.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(v.jsx)("div",{className:t.chips,children:e.map((function(e){return Object(v.jsx)(ae.a,{label:e,className:t.chip},e)}))})},children:e.properties.floors.map((function(e,t){return Object(v.jsx)(ne.a,{value:"Floor "+t,name:t,children:"Floor "+t},t)}))})]})}),Object(v.jsx)(M.a,{children:Object(v.jsxs)(P.a,{container:!0,alignItems:"center",justify:"center",children:[Object(v.jsx)(P.a,{item:!0,children:Object(v.jsx)(s.a,{className:t.textField+" "+t.positionTextField,disabled:!0,variant:"outlined",label:"X",value:e.properties?e.properties.x:""})}),Object(v.jsx)(P.a,{item:!0,children:Object(v.jsx)(s.a,{className:t.textField+" "+t.positionTextField,disabled:!0,variant:"outlined",label:"Y",value:e.properties?e.properties.y:""})})]})}),Object(v.jsx)(M.a,{children:Object(v.jsx)(s.a,{className:t.textField,disabled:!0,variant:"outlined",label:"Rotation",value:e.properties?e.properties.rotation:""})}),Object(v.jsx)(q.a,{}),Object(v.jsx)(M.a,{children:Object(v.jsx)(s.a,{className:t.textField,disabled:y,variant:"outlined",label:"Label",onChange:function(e){return D(e,"label")},value:e.properties?e.properties.label:""})}),Object(v.jsx)(M.a,{children:Object(v.jsx)(s.a,{label:"Font Size",disabled:y,className:t.textField,type:"number",InputLabelProps:{shrink:!0},inputProps:{min:1},variant:"outlined",onChange:function(e){return D(e,"fontSize")},value:e.properties?e.properties.fontSize:""})}),Object(v.jsx)(M.a,{children:Object(v.jsxs)(oe.a,{value:e.properties?e.properties.textAlign:"",exclusive:!0,className:t.textField,"aria-label":"outlined primary button group",children:[Object(v.jsx)(ce.a,{value:"left",onClick:function(){return e.updateProperty("textAlign","left")},children:Object(v.jsx)(le.a,{})}),Object(v.jsx)(ce.a,{value:"center",onClick:function(){return e.updateProperty("textAlign","center")},children:Object(v.jsx)(se.a,{})}),Object(v.jsx)(ce.a,{value:"right",onClick:function(){return e.updateProperty("textAlign","right")},children:Object(v.jsx)(de.a,{})})]})}),Object(v.jsx)(q.a,{}),Object(v.jsxs)(M.a,{children:[Object(v.jsxs)(Z.a,{variant:"outlined",className:t.textField,children:[Object(v.jsx)(_.a,{htmlFor:"outlined-age-native-simple",children:"Category"}),Object(v.jsxs)(ee.a,{disabled:y,native:!0,value:e.properties?e.properties.category:"",onChange:function(e){return D(e,"category")},label:"Category",inputProps:{name:"Category"},children:[Object(v.jsx)("option",{"aria-label":"None",value:""}),e.categories.map((function(e,t){return Object(v.jsx)("option",{value:t,children:e.categoryName},t)}))]})]}),Object(v.jsx)("span",{children:Object(v.jsx)(u.a,{onClick:e.showCategoryModal,variant:"contained",children:Object(v.jsx)(he.a,{})})})]})]}),y?Object(v.jsx)("h2",{className:t.propertiesFormDisabledText,children:"Select Shape to View Properties"}):""]})}),Object(v.jsx)(B,{value:r,index:1,children:Object(v.jsxs)("div",{className:m,children:[Object(v.jsx)("h1",{style:{textAlign:"center"},children:"Select Building From Below"}),Object(v.jsx)(F.a,{children:e.savedShapes.map((function(t,a){if("path"!=t.name)return Object(v.jsx)(M.a,{selected:!1,button:!0,onClick:function(){e.setBuildingBeingViewed(a)},children:Object(v.jsx)(K.a,{primary:t.label})},t.label)}))})]})}),Object(v.jsx)(B,{value:r,index:2,children:function(){if(e.buildingBeingViewed)return Object(v.jsxs)("div",{className:m,children:[Object(v.jsx)("h1",{style:{textAlign:"center"},children:"Select Floor From Below"}),Object(v.jsxs)(F.a,{children:[e.buildingBeingViewed.internal.map((function(t,a){return Object(v.jsx)(M.a,{button:!0,onClick:function(){e.setFloorBeingViewed(a)},children:Object(v.jsx)(K.a,{primary:"Floor "+a})},"floor"+a)})),Object(v.jsx)(M.a,{button:!0,onClick:e.addFloor,children:Object(v.jsx)(K.a,{primary:"Add Floor"})},"addFloor")]})]})}()})]})]})]})},fe=a(17),ge=function(e){var t=Object(n.useRef)(),a=Object(n.useRef)(),r=Object(n.useRef)(),o=Object(n.useRef)();return Object(n.useEffect)((function(){e.shapeProps.selected&&(t.current.nodes([a.current]),t.current.getLayer().batchDraw())}),[e.shapeProps.selected]),Object(v.jsxs)(i.a.Fragment,{children:[Object(v.jsxs)(fe.a,{ref:a,shapePoints:e.shapeProps.points,draggable:!0,onDragStart:function(t){return e.dragStart(t,e.index)},onDragMove:function(t){return e.dragMove(t,e.index)},onDragEnd:function(t){return e.dragEnd(t,e.index)},onClick:function(){return e.onSelect(e.index)},onTap:function(){return e.onSelect(e.index)},rotation:parseInt(e.shapeProps.rotation),x:e.shapeProps.x,y:e.shapeProps.y,width:e.shapeProps.width,height:e.shapeProps.height,name:e.shapeProps.name,zIndex:"building"===e.shapeProps.name?1e3:-1,onTransformEnd:function(t){var n=a.current,i=n.scaleX(),c=n.scaleY();n.scaleX(1),n.scaleY(1);var l=r.current,s=l.width(),d=l.height(),u=o.current,h=u.getAbsoluteScale();u.scaleX(u.scaleX()/h.x),u.scaleY(u.scaleY()/h.y),e.updatePropertiesOfShape("x",n.x()),e.updatePropertiesOfShape("y",n.y()),e.updatePropertiesOfShape("width",s*i),e.updatePropertiesOfShape("height",d*c),e.updatePropertiesOfShape("rotation",Math.floor(n.rotation())),e.updatePoints()},children:[Object(v.jsx)(fe.d,{ref:r,fill:e.shapeColour,width:e.shapeProps.width,height:e.shapeProps.height}),Object(v.jsx)(fe.f,{ref:o,text:e.shapeProps.label,width:e.shapeProps.width,height:e.shapeProps.height,fontSize:parseInt(e.shapeProps.fontSize),fontFamily:"Calibri",fill:e.fontColour,verticalAlign:"middle",align:e.shapeProps.textAlign})]}),e.shapeProps.selected&&Object(v.jsx)(fe.g,{width:200,ref:t,boundBoxFunc:function(e,t){return t.width<10||t.height<10?e:t}})]})},xe=function(e){var t=O(),a=Object(n.useState)(1),r=Object(c.a)(a,2),o=r[0],l=r[1],s=Object(n.useState)(0),d=Object(c.a)(s,2),u=d[0],h=d[1],p=Object(n.useState)(0),j=Object(c.a)(p,2),b=j[0],f=j[1];return Object(v.jsx)(fe.e,{className:t.canvas,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,draggable:!0,ref:e.stageRef,onMouseDown:function(t){return e.checkDeselect(t)},onTouchStart:function(t){return e.checkDeselect(t)},onWheel:function(e){e.evt.preventDefault();var t=e.target.getStage(),a=t.scaleX(),n=t.getPointerPosition().x/a-t.x()/a,i=t.getPointerPosition().y/a-t.y()/a,r=e.evt.deltaY<0?1.01*a:a/1.01;t.scale({x:r,y:r}),l(r),h(-(n-t.getPointerPosition().x/r)*r),f(-(i-t.getPointerPosition().y/r)*r)},scaleX:o,scaleY:o,x:u,y:b,children:Object(v.jsxs)(fe.b,{ref:e.layerRef,children:[0===e.activeStep?e.shapes.map((function(t,a){return Object(v.jsx)(ge,{index:a,shapeProps:t,dragStart:e.dragStart,dragMove:e.dragMove,dragEnd:e.dragEnd,onSelect:e.onSelect,updatePropertiesOfShape:e.updateProperty,shapeColour:e.categories[t.category].mainColour,fontColour:e.categories[t.category].fontColour,updatePoints:e.updatePoints},a)})):function(){if(e.buildingBeingViewed)return[e.buildingBeingViewed.x,e.buildingBeingViewed.y,e.buildingBeingViewed.x+e.buildingBeingViewed.width,e.buildingBeingViewed.y,e.buildingBeingViewed.x+e.buildingBeingViewed.width,e.buildingBeingViewed.y+e.buildingBeingViewed.height,e.buildingBeingViewed.x,e.buildingBeingViewed.y+e.buildingBeingViewed.height],Object(v.jsxs)(i.a.Fragment,{children:[Object(v.jsx)(fe.d,{x:e.buildingBeingViewed.x,y:e.buildingBeingViewed.y,width:e.buildingBeingViewed.width,height:e.buildingBeingViewed.height,fill:e.categories[e.buildingBeingViewed.category].mainColour,closed:!0,rotation:0}),e.shapes.map((function(t,a){if(null!==t){if("lifts"!==t.name&&"stairs"!==t.name)return Object(v.jsx)(ge,{index:a,shapeProps:t,dragStart:e.dragStart,dragMove:e.dragMove,dragEnd:e.dragEnd,onSelect:e.onSelect,updatePropertiesOfShape:e.updateProperty,shapeColour:e.categories[t.category].mainColour,fontColour:e.categories[t.category].fontColour,updatePoints:e.updatePoints},a);if(t.floors[e.floorBeingViewed])return Object(v.jsx)(ge,{index:a,shapeProps:t,dragStart:e.dragStart,dragMove:e.dragMove,dragEnd:e.dragEnd,onSelect:e.onSelect,updatePropertiesOfShape:e.updateProperty,shapeColour:e.categories[t.category].mainColour,fontColour:e.categories[t.category].fontColour,updatePoints:e.updatePoints},a)}}))]})}(),e.guides.map((function(e,t){return"V"===e.orientation?Object(v.jsx)(fe.c,{x:e.lineGuide,y:0,points:[0,-6e3,0,6e3],stroke:"#0000FF",strokeWidth:1,name:"guide-line",dash:[4,6]},t):"H"===e.orientation?Object(v.jsx)(fe.c,{x:0,y:e.lineGuide,points:[-6e3,0,6e3,0],stroke:"#0000FF",strokeWidth:1,name:"guide-line",dash:[4,6]},t):void 0}))]})})},me=a(8),Oe=a(436),ve=a(491),ye=a(492),we=a(505),Ce=a(208),Se=a.n(Ce),ke=a(7),Pe=Object(me.a)({alternativeLabel:{top:10,left:"calc(-50% + 16px)",right:"calc(50% + 16px)"},active:{"& $line":{borderColor:"#3f51b5"}},completed:{"& $line":{borderColor:"#3f51b5"}},line:{borderColor:"#eaeaf0",borderTopWidth:3,borderRadius:1}})(Oe.a),De=Object(m.a)({root:{color:"#eaeaf0",display:"flex",height:22,alignItems:"center"},active:{color:"#3f51b5"},circle:{width:8,height:8,borderRadius:"50%",backgroundColor:"currentColor"},completed:{color:"#3f51b5",zIndex:1}});function Ne(e){var t=De(),a=e.active,n=e.completed;return Object(v.jsx)("div",{className:Object(ke.a)(t.root,Object(L.a)({},t.active,a)),children:n?Object(v.jsx)(Se.a,{className:t.completed}):Object(v.jsx)("div",{className:t.circle})})}var Fe=function(e){return Object(v.jsx)(i.a.Fragment,{children:Object(v.jsx)(ve.a,{alternativeLabel:!0,activeStep:e.activeStep,connector:Object(v.jsx)(Pe,{}),children:["Create Campus Map","Create For Each Building","Final Steps"].map((function(e){return Object(v.jsx)(ye.a,{children:Object(v.jsx)(we.a,{StepIconComponent:Ne,children:e})},e)}))})})},Me=a(9),Be=a.n(Me),Re=a(217),Te=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),i=a[0],r=a[1],o=Object(n.useState)(e.colour),l=Object(c.a)(o,2),s=l[0],d=l[1];console.log(e.colour);var u=Be()({default:{colour:{width:"36px",height:"14px",borderRadius:"2px",background:s},swatch:{padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}});return Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{style:u.swatch,onClick:function(){r(!i)},children:Object(v.jsx)("div",{style:u.colour})}),i?Object(v.jsxs)("div",{style:u.popover,children:[Object(v.jsx)("div",{style:u.cover,onClick:function(){r(!1)}}),console.log(s),Object(v.jsx)(Re.a,{color:s,onChange:function(t){d(t.hex),e.handleColourChange(t.hex)}})]}):null]})};function Ae(e,t,a){var n=function(e,t,a){var n=[0,a.current.width()/2,a.current.width()],i=[0,a.current.height()/2,a.current.height()];return t.forEach((function(t){if(t!==e){var a=t.getClientRect();n.push([a.x,a.x+a.width,a.x+a.width/2]),i.push([a.y,a.y+a.height,a.y+a.height/2])}})),{vertical:n.flat(),horizontal:i.flat()}}(e,t,a),i=function(e){var t=e.getClientRect(),a=e.absolutePosition();return{vertical:[{guide:Math.round(t.x),offset:Math.round(a.x-t.x),snap:"start"},{guide:Math.round(t.x+t.width/2),offset:Math.round(a.x-t.x-t.width/2),snap:"center"},{guide:Math.round(t.x+t.width),offset:Math.round(a.x-t.x-t.width),snap:"end"}],horizontal:[{guide:Math.round(t.y),offset:Math.round(a.y-t.y),snap:"start"},{guide:Math.round(t.y+t.height/2),offset:Math.round(a.y-t.y-t.height/2),snap:"center"},{guide:Math.round(t.y+t.height),offset:Math.round(a.y-t.y-t.height),snap:"end"}]}}(e),r=[],o=[];n.vertical.forEach((function(e){i.vertical.forEach((function(t){var a=Math.abs(e-t.guide);a<5&&r.push({lineGuide:e,diff:a,snap:t.snap,offset:t.offset})}))})),n.horizontal.forEach((function(e){i.horizontal.forEach((function(t){var a=Math.abs(e-t.guide);a<5&&o.push({lineGuide:e,diff:a,snap:t.snap,offset:t.offset})}))}));var c=[],l=r.sort((function(e,t){return e.diff-t.diff}))[0],s=o.sort((function(e,t){return e.diff-t.diff}))[0];return l&&c.push({lineGuide:l.lineGuide,offset:l.offset,orientation:"V",snap:l.snap}),s&&c.push({lineGuide:s.lineGuide,offset:s.offset,orientation:"H",snap:s.snap}),c}var Ee=[{categoryName:"Building",mainColour:"#ff0000",fontColour:"#ffffff"},{categoryName:"Path",mainColour:"#5c5953",fontColour:"#ffffff"}];function Le(e,t){for(var a=e.points,n=t.points,i=Ie(a),r=Ie(n),o=[],c=0,l=0,s=0,d=0,u=0,h=0;h<i.length;h+=2)[-i[h+1],i[h]],o.push(-i[h+1]),o.push(i[h]);for(h=0;h<r.length;h+=2)[-r[h+1],r[h]],o.push(-r[h+1]),o.push(r[h]);for(h=0;h<o.length;h+=2){l=null,s=null,d=null,u=null;for(var p=0;p<a.length;p+=2)c=a[p]*o[h]+a[p+1]*o[h+1],(null===s||c>s)&&(s=c),(null===l||c<l)&&(l=c);for(p=0;p<n.length;p+=2)c=n[p]*o[h]+n[p+1]*o[h+1],(null===u||c>u)&&(u=c),(null===d||c<d)&&(d=c);if(!(l<=u&&l>=d||d<=s&&d>=l))return!1}return!0}function Ie(e){for(var t=[],a=2;a<e.length;a++)t.push(e[a]-e[a-2]);return t.push(e[0]-e[e.length-2]),t.push(e[1]-e[e.length-1]),t}var Ve=Object(f.a)(null),ze=function(e){Ve.set(e)},Xe=function(){var e=Object(n.useState)(Ee),t=Object(c.a)(e,2),a=t[0],r=t[1],o=O(),d=Object(n.useState)([]),j=Object(c.a)(d,2),f=j[0],x=j[1],m=Object(n.useState)([]),y=Object(c.a)(m,2),w=y[0],C=y[1],S=Object(n.useState)([]),P=Object(c.a)(S,2),D=P[0],N=P[1],F=Object(n.useState)(-1),M=Object(c.a)(F,2),B=M[0],R=M[1],T=Object(n.useState)(!1),A=Object(c.a)(T,2),E=A[0],K=A[1],J=Object(n.useState)(!1),q=Object(c.a)(J,2),Q=q[0],$=q[1],Z=Object(n.useState)(""),_=Object(c.a)(Z,2),ee=_[0],te=_[1],ae=Object(n.useState)(""),ne=Object(c.a)(ae,2),ie=ne[0],re=ne[1],oe=Object(n.useState)(""),ce=Object(c.a)(oe,2),le=ce[0],se=ce[1],de=Object(n.useState)(0),ue=Object(c.a)(de,2),he=ue[0],pe=ue[1],je=Object(n.useState)(null),fe=Object(c.a)(je,2),ge=fe[0],me=fe[1],Oe=Object(n.useState)(0),ve=Object(c.a)(Oe,2),ye=ve[0],we=ve[1],Ce=Object(n.useRef)(),Se=Object(n.useRef)(),ke=Object(n.useState)(""),Pe=Object(c.a)(ke,2),De=Pe[0],Ne=Pe[1],Me=Object(n.useState)(!1),Be=Object(c.a)(Me,2),Re=Be[0],Ie=Be[1],ze=Ve.use(),Xe=g.use();function He(e){for(var t=Object(I.a)(f),a=t[B],n=[a.x,a.y,a.x+a.width,a.y,a.x+a.width,a.y-a.height,a.x,a.y-a.height],i=0;i<8;i+=2){var r=We(n[i],n[i+1],a.x,a.y,a.rotation);n[i]=r.x,n[i+1]=r.y}a.points=n,t[e]=a,x(t)}function We(e,t,a,n,i){var r=i*(-Math.PI/180);return{x:Math.cos(r)*(e-a)-Math.sin(r)*(t-n)+a,y:-Math.sin(r)*(e-a)-Math.cos(r)*(t-n)+n}}function Ge(e,t){var a=Object(I.a)(f);a[B][e]=t,x(a)}function Ye(e,t,n){var i=a;i[e][t]=n,r(i)}return Object(n.useEffect)((function(){if(null!==ze){for(var e=0;e<ze[1].mapData.length;e++)if("building"===ze[1].mapData[e].name){for(var t=0;t<ze[1].mapData[e].internal.length;t++)"empty"===ze[1].mapData[e].internal[t][0]&&(ze[1].mapData[e].internal[t][0]=[]);"empty"===ze[1].mapData[e].lifts[0]&&(ze[1].mapData[e].lifts=[],console.log(ze[1].mapData[e])),"empty"===ze[1].mapData[e].stairs[0]&&(ze[1].mapData[e].stairs=[])}x(Object(I.a)(ze[1].mapData)),r(ze[1].categories),Ne(ze[1].mapName),Ie(!0)}}),[]),Object(v.jsxs)(i.a.Fragment,{children:[function(){if(null===Xe)return Object(v.jsx)(p.a,{to:"/"});Xe=Xe.uid}(),Object(v.jsxs)("div",{className:o.root,children:[Object(v.jsx)(Y,{incrementStep:function(){0===he?function(){for(var e=f.filter((function(e){return"building"===e.name})),t=f.filter((function(e){return"path"===e.name})),a=[],n=0;n<e.length;n++){for(var i=!1,r=0;r<t.length;r++)if(Le(e[n],t[r])){i=!0;break}i||a.push(e[n])}var o=!0;if(t.length>1)for(n=0;n<t.length;n++){for(i=!1,r=0;r<t.length;r++)if(n!==r&&Le(t[n],t[r])){i=!0;break}if(!i){o=!1;break}}if(0===a.length&&o)return!0;var c="";if(o||(c="Ensure Pathways Are Connected To Each Other"),0!==a.length){var l="";for(n=0;n<a.length;n++)l=l+a[n].label+" ";c+="\nEnsure Following Buildings Touch A Pathway: "+l}return alert(c),!1}()&&(C(Object(I.a)(f)),x([]),pe(he+1)):1===he&&function(){for(var e=w.filter((function(e){return"building"===e.name})),t=[],a=!0,n=!0,i=!0,r=0;r<e.length;r++)for(var o=e[r].internal,c=e[r].lifts,l=e[r].stairs,s=0;s<o.length;s++)for(var d=o[s],u=0;u<d.length;u++){for(var h=d.filter((function(e){return"room"===e.name})),p=d.filter((function(e){return"path"===e.name})),j=0;j<c.length;j++)if(console.log(c[j]),c[j].floors[s]){for(var b=!1,f=0;f<p.length;f++)if(Le(c[j],p[f])){b=!0;break}b||(n=!1)}for(j=0;j<l.length;j++)if(l[j].floors[s]){for(b=!1,f=0;f<p.length;f++)if(Le(l[j],p[f])){b=!0;break}b||(i=!1)}if(p.length>1)for(j=0;j<p.length;j++){var g=!1;for(f=0;f<p.length;f++)if(j!==f&&Le(p[j],p[f])){g=!0;break}if(!g){a=!1;break}}for(j=0;j<h.length;j++){for(g=!1,f=0;f<p.length;f++)if(Le(h[j],p[f])){g=!0;break}g||t.push(h[j])}}if(0===t.length&&a&&n&&i)return!0;var x="";return 0!==t.length&&(x+="Ensure All Rooms Are Connected To Pathways"),a||(x+="\nEnsure All Pathways Are Connected With Each Other"),n||(x+="\nEnsure All lifts Are Connected To Pathways"),i||(x+="\nEnsure All Staircases Are Connected To Pathways"),alert(x),!1}()&&pe(he+1)},decrementStep:function(){0!=he&&(x(Object(I.a)(w)),pe(he-1))}}),Object(v.jsx)(U,{activeStep:he,buttonClick:function(e){var t,a=window.innerWidth/8,n=document.documentElement.clientWidth/8,i=0,r=0,o="",c=1,l=15;"building"===e?(i=100,r=100,o="Building",c=0):"room"===e?(i=10,r=10,o="Room",l=4,a=w[ge].x+w[ge].width/2,n=w[ge].y+w[ge].height/2):"path"===e?(i=50,r=50):(i=10,r=10);var s=(t={x:a,y:n,width:i,height:r,selected:!1,label:o,fontSize:l,name:e},Object(L.a)(t,"selected",!1),Object(L.a)(t,"textAlign","center"),Object(L.a)(t,"rotation",0),Object(L.a)(t,"category",c),Object(L.a)(t,"points",[a,n,a+i,n,a+i,n+r,a,n+r]),t);if("building"===e)s.internal=[[]],s.lifts=[],s.stairs=[],s.entrance=null;else if("lifts"===e||"stairs"===e){for(var d=[],u=0;u<w[ge].internal.length;u++)d.push(!1);d[ye]=!0,s.floors=d,s.index=w[ge][e].length}else"entrance"===e&&(s.floorNumber=ye);var h=Object(I.a)(f);h.push(s),1===he&&("lifts"===e?w[ge].lifts.push(s):"stairs"===e?w[ge].stairs.push(s):"entrance"===e?w[ge].entrance=s:w[ge].internal[ye].push(s)),x(h)},buildingBeingViewed:ge}),Object(v.jsxs)("main",{className:o.content,children:[Object(v.jsx)(k.a,{}),Object(v.jsx)("div",{children:Object(v.jsx)(Fe,{activeStep:he,buildingBeingViewed:w[ge]})}),Object(v.jsx)(xe,{dragStart:function(e,t){var a=Object(I.a)(f);x(a),R(t)},dragMove:function(e,t){var a=Ce.current.getChildren((function(e){return"Group"===e.getClassName()})),n=Ae(e.target,a,Se);if(n.length){var i=e.target.absolutePosition();n.forEach((function(e){switch(e.snap){case"start":case"center":case"end":switch(e.orientation){case"V":i.x=e.lineGuide+e.offset;break;case"H":i.y=e.lineGuide+e.offset}}})),e.target.absolutePosition(i),N(n)}},dragEnd:function(e,t){var a=Object(I.a)(f),n=e.target;a[t].x=Math.floor(n.x()),a[t].y=Math.floor(n.y()),He(t),N([]),x(a)},guides:D,shapes:f,layerRef:Ce,stageRef:Se,onSelect:function(e){for(var t=Object(I.a)(f),a=0;a<t.length;a++)t[a].selected=e===a;x(t),R(e)},updateProperty:Ge,checkDeselect:function(e){if(e.target===e.target.getStage()){for(var t=Object(I.a)(f),a=0;a<t.length;a++)t[a].selected=!1;x(t),R(-1)}},categories:a,updatePoints:He,activeStep:he,buildingBeingViewed:w[ge],floorBeingViewed:ye})]}),Object(v.jsx)(be,{setBuildingBeingViewed:function(e){me(e),we(0),x([])},buildingBeingViewed:w[ge],properties:f[B],updateProperty:Ge,savedShapes:w,categories:a,showCategoryModal:function(){return K(!0)},activeStep:he,clearShapes:function(){x([]),me(null)},setFloorBeingViewed:function(e){we(e);var t=Object(I.a)(w[ge].internal[e]);t=(t=t.concat(t,w[ge].lifts)).concat(t,w[ge].stairs),null!==w[ge].entrance&&w[ge].entrance.floorNumber===e&&t.push(w[ge].entrance),x(t)},addFloor:function(){w[ge].internal.push([]);for(var e=w[ge].lifts,t=0;t<e.length;t++)e[t].floors.push(!1);var a=w[ge].stairs;for(t=0;t<a.length;t++)a[t].floors.push(!1);w[ge].lifts=e,w[ge].stairs=a,C(Object(I.a)(w))},updateLiftStaircaseAccessibility:function(e,t,a){for(var n=0;n<w[ge][e][a].floors.length;n++)t.includes(n)?w[ge][e][a].floors[n]=!0:w[ge][e][a].floors[n]=!1;C(Object(I.a)(w))},deleteSelected:function(){if(console.log(f[B]),0===he){for(var e=[],t=0;t<f.length;t++)t!==B&&e.push(f[t]);x([].concat(e)),R(-1)}}})]}),E&&Object(v.jsx)(h.a,{open:E,onClose:function(){return K(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(v.jsxs)("div",{className:o.modalContent,children:[Object(v.jsx)(u.a,{onClick:function(){return K(!1)},style:{position:"absolute",top:0,right:0,margin:10},children:"X"}),Object(v.jsx)("h2",{children:"View Categories"}),Object(v.jsx)(V.a,{component:l.a,children:Object(v.jsxs)(z.a,{className:o.table,"aria-label":"simple table",children:[Object(v.jsx)(X.a,{children:Object(v.jsxs)(H.a,{children:[Object(v.jsx)(W.a,{children:"Category Name"}),Object(v.jsx)(W.a,{align:"center",children:"Shape Colour"}),Object(v.jsx)(W.a,{align:"center",children:"Font Colour"})]})}),Object(v.jsx)(G.a,{children:a.map((function(e,t){return Object(v.jsxs)(H.a,{children:[Object(v.jsx)(W.a,{component:"th",scope:"row",children:Object(v.jsx)(s.a,{defaultValue:e.categoryName,onChange:function(e){return Ye(t,"categoryName",e.target.value)}})}),Object(v.jsx)(W.a,{component:"th",scope:"row",children:Object(v.jsx)(Te,{handleColourChange:function(e){return Ye(t,"mainColour",e)},colour:e.mainColour})}),Object(v.jsx)(W.a,{component:"th",scope:"row",children:Object(v.jsx)(Te,{handleColourChange:function(e){return Ye(t,"fontColour",e)},colour:e.fontColour})})]},t)}))})]})}),Object(v.jsx)(u.a,{className:o.modalButton,variant:"contained",color:"primary",onClick:function(){te(""),re(""),se(""),$(!0)},style:{float:"right"},children:"Add New Category"})]})}),Q&&Object(v.jsx)(h.a,{open:Q,onClose:function(){return $(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(v.jsxs)("div",{className:o.modalContent,children:[Object(v.jsx)(u.a,{onClick:function(){return $(!1)},style:{position:"absolute",top:0,right:0,margin:10},children:"X"}),Object(v.jsx)("h2",{children:"Add Categories"}),Object(v.jsx)(s.a,{className:o.textField,variant:"outlined",label:"Category Name",onChange:function(e){return te(e.target.value)}}),Object(v.jsxs)("div",{className:o.textField,children:[Object(v.jsx)("p",{children:"Main Colour"}),Object(v.jsx)(Te,{handleColourChange:function(e){return re(e)},colour:"#000000"})]}),Object(v.jsxs)("div",{className:o.textField,children:[Object(v.jsx)("p",{children:"Font Colour"}),Object(v.jsx)(Te,{handleColourChange:function(e){return se(e)},colour:"#000000"})]}),Object(v.jsx)(u.a,{className:o.modalButton,variant:"contained",color:"primary",onClick:function(){if(""===ee||""===ie||""===le)alert("Ensure All Fields Are Filled Out");else{var e={categoryName:ee,mainColour:ie,fontColour:le},t=Object(I.a)(a);t.push(e),r(t),$(!1)}},style:{float:"right"},children:"Save"})]})}),Object(v.jsx)(h.a,{open:2===he,onClose:function(){return pe(he-1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(v.jsxs)("div",{className:o.modalContent,children:[Object(v.jsx)("h2",{children:"Save Map"}),Object(v.jsx)(s.a,{id:"mapNameTextField",className:o.textField,variant:"outlined",label:"Map Name",defaultValue:De,onChange:function(e){return Ne(e.target.value)}}),Object(v.jsx)(u.a,{id:"createMapButton",className:o.modalButton,variant:"contained",color:"primary",onClick:function(){for(var e=0;e<w.length;e++)if("building"===w[e].name){for(var t=0;t<w[e].internal.length;t++)0===w[e].internal[t].length&&w[e].internal[t].push("empty");0===w[e].lifts.length&&w[e].lifts.push("empty"),0===w[e].stairs.length&&w[e].stairs.push("empty")}var n=new Date,i=n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear(),r={mapName:De,categories:a,mapData:w,userID:Xe,active:!0,updatedDate:i};Re||(r.createdDate=i,r.code=function(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",a="",n=e;n>0;--n)a+=t[Math.round(Math.random()*(t.length-1))];return a}(6));var o=b.database();Re?o.ref("MapData/"+ze[0]).update({mapName:De,categories:a,mapData:w,userID:Xe,active:!0,updatedDate:i}):o.ref("MapData").push(r),window.location.href="#/admin"},style:{float:"right"},children:"Save"})]})})]})},He=a(437),We=a(499),Ge=a(504),Ye=a(503),Ke=a(153),Je=a.n(Ke),qe=function(e){var t={};return"building"===e.shapeProps.name&&(t={onClick:function(){return e.clickHandler(e.shapeProps.index)},onMouseEnter:function(e){e.target.getStage().container().style.cursor="pointer"},onMouseLeave:function(e){e.target.getStage().container().style.cursor="default"}}),Object(v.jsxs)(fe.a,Object(Q.a)(Object(Q.a)({shapePoints:e.shapeProps.points,rotation:parseInt(e.shapeProps.rotation),x:e.shapeProps.x,y:e.shapeProps.y,width:e.shapeProps.width,height:e.shapeProps.height,name:e.shapeProps.name,opacity:e.opacity},t),{},{children:[Object(v.jsx)(fe.d,{fill:e.shapeColour,width:e.shapeProps.width,height:e.shapeProps.height}),Object(v.jsx)(fe.f,{text:e.shapeProps.label,width:e.shapeProps.width,height:e.shapeProps.height,fontSize:parseInt(e.shapeProps.fontSize),fontFamily:"Calibri",fill:e.fontColour,verticalAlign:"middle",align:e.shapeProps.textAlign})]}))},Ue=function(e){var t=O(),a=Object(n.useState)(1),i=Object(c.a)(a,2),r=i[0],o=i[1],l=Object(n.useState)(0),s=Object(c.a)(l,2),d=s[0],u=s[1],h=Object(n.useState)(0),p=Object(c.a)(h,2),j=p[0],b=p[1];return Object(v.jsx)(fe.e,{className:t.viewMapCanvas,width:void 0===e.width?document.documentElement.clientWidth:e.width,height:void 0===e.height?document.documentElement.clientHeight:e.height,onWheel:function(e){e.evt.preventDefault();var t=e.target.getStage(),a=t.scaleX(),n=t.getPointerPosition().x/a-t.x()/a,i=t.getPointerPosition().y/a-t.y()/a,r=e.evt.deltaY<0?1.01*a:a/1.01;t.scale({x:r,y:r}),o(r),u(-(n-t.getPointerPosition().x/r)*r),b(-(i-t.getPointerPosition().y/r)*r)},scaleX:r,scaleY:r,draggable:!0,x:d,y:j,children:Object(v.jsx)(fe.b,{children:Object(v.jsx)(fe.a,{children:null!=e.shapes&&null!=e.categories&&e.shapes.map((function(t,a){var n=null,i=1;return e.showingResult?t.search?n="#03b1fc":t.origin?n="#03fc0f":t.destination?n="#fc03ce":t.pathwayShape?n="#0000FF":(n=e.categories[t.category].mainColour,i=.5):n=e.categories[t.category].mainColour,Object(v.jsx)(qe,{shapeProps:t,shapeColour:n,fontColour:e.categories[t.category].fontColour,opacity:i,clickHandler:e.clickHandler},a)}))})})})},Qe=function(e){var t=O(),a=Object(n.useState)(1),r=Object(c.a)(a,2),o=r[0],l=r[1],s=Object(n.useState)(0),d=Object(c.a)(s,2),p=d[0],j=d[1],b=Object(n.useState)(0),f=Object(c.a)(b,2),g=f[0],x=f[1];var m=0,y=Math.ceil(Math.sqrt(e.building.internal.length)),w=-e.building.width-50+50,C=50,S=1;return Object(v.jsx)(h.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:!0,onClose:e.handleClose,children:Object(v.jsxs)("div",{className:t.modalContent,children:[Object(v.jsx)(u.a,{id:"closeModalButton",onClick:e.handleClose,style:{position:"absolute",top:0,right:0,margin:10},children:"X"}),Object(v.jsx)("h2",{children:e.building.label}),Object(v.jsx)(fe.e,{height:500,width:750,className:t.viewMapCanvas,onWheel:function(e){e.evt.preventDefault();var t=e.target.getStage(),a=t.scaleX(),n=t.getPointerPosition().x/a-t.x()/a,i=t.getPointerPosition().y/a-t.y()/a,r=e.evt.deltaY<0?1.01*a:a/1.01;t.scale({x:r,y:r}),l(r),j(-(n-t.getPointerPosition().x/r)*r),x(-(i-t.getPointerPosition().y/r)*r)},scaleX:o,scaleY:o,draggable:!0,x:p,y:g,children:Object(v.jsx)(fe.b,{children:e.building.internal.map((function(t,a){return S>y?(S=1,w=50,C+=e.building.height+50):w+=e.building.width+50,S++,m++,Object(v.jsxs)(i.a.Fragment,{children:[Object(v.jsx)(fe.f,{x:w,y:C-20,text:"Floor "+m,fontSize:20,fontFamily:"Calibri"}),Object(v.jsx)(fe.d,{x:w,y:C,width:e.building.width,height:e.building.height,fill:e.categories[e.building.category].mainColour}),e.building.internal[m-1].map((function(t,a){var n=null,r=1;return e.showingResult?t.search?n="#03b1fc":t.origin?n="#03fc0f":t.destination?n="#fc03ce":t.pathwayShape?n="#0000FF":(n=e.categories[t.category].mainColour,r=.6):n=e.categories[t.category].mainColour,Object(v.jsxs)(i.a.Fragment,{children:[Object(v.jsx)(fe.d,{x:t.x-e.building.x+w,y:t.y-e.building.y+C,width:t.width,height:t.height,fill:n,opacity:r}),Object(v.jsx)(fe.f,{x:t.x-e.building.x+w,y:t.y-e.building.y+C,text:t.label,width:t.width,height:t.height,fontSize:parseInt(t.fontSize),fontFamily:"Calibri",fill:e.categories[t.category].fontColour,verticalAlign:"middle",align:t.textAlign,opacity:r})]})})),e.building.lifts.map((function(t,a){if(t.floors[m-1])return Object(v.jsx)(fe.d,{x:t.x-e.building.x+w,y:t.y-e.building.y+C,width:t.width,height:t.height,fill:e.categories[t.category].mainColour,opacity:e.showingResult?.6:1})})),e.building.stairs.map((function(t,a){if(t.floors[m-1])return Object(v.jsx)(fe.d,{x:t.x-e.building.x+w,y:t.y-e.building.y+C,width:t.width,height:t.height,fill:e.categories[t.category].mainColour,opacity:e.showingResult?.6:1})})),void 0!==e.building.entrance&&e.building.entrance.floorNumber===m-1&&Object(v.jsx)(fe.d,{x:e.building.entrance.x-e.building.x+w,y:e.building.entrance.y-e.building.y+C,width:e.building.entrance.width,height:e.building.entrance.height,fill:e.categories[e.building.entrance.category].mainColour,opacity:e.showingResult?.6:1})]})}))})})]})})},$e=function(e){var t=O();return Object(v.jsx)(l.a,{className:t.paper,style:{marginTop:100,width:150,top:0,right:0},elevation:10,children:Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{id:"searchKey",style:{margin:10,float:"left",border:"1px solid black",height:"10px",width:"10px",backgroundColor:"#03b1fc"}}),Object(v.jsx)("p",{style:{paddingTop:5},children:" Search Result"}),Object(v.jsx)("div",{id:"originhKey",style:{margin:10,float:"left",border:"1px solid black",height:"10px",width:"10px",backgroundColor:"#03fc0f"}}),Object(v.jsx)("p",{style:{paddingTop:5},children:" Origin"}),Object(v.jsx)("div",{id:"destinationKey",style:{margin:10,float:"left",border:"1px solid black",height:"10px",width:"10px",backgroundColor:"#fc03ce"}}),Object(v.jsx)("p",{style:{paddingTop:5},children:" Destination"}),Object(v.jsx)("div",{id:"routeKey",style:{margin:10,float:"left",border:"1px solid black",height:"10px",width:"10px",backgroundColor:"#0000FF"}}),Object(v.jsx)("p",{style:{paddingTop:5},children:" Route"}),e.categories.map((function(e,t){return Object(v.jsxs)("div",{id:"legendKey",children:[Object(v.jsx)("div",{style:{margin:10,float:"left",border:"1px solid black",height:"10px",width:"10px",backgroundColor:e.mainColour}}),Object(v.jsxs)("p",{style:{paddingTop:5},children:[" ",e.categoryName]})]},"legend"+t)}))]})})},Ze=a(213),_e=a.n(Ze),et=function(e){var t=O();return Object(v.jsx)(h.a,{open:!0,onClose:e.handleClose,children:Object(v.jsxs)("div",{className:t.modalContent,children:[Object(v.jsx)(u.a,{id:"closeModalButton",onClick:e.handleClose,style:{position:"absolute",top:0,right:0,margin:10},children:"X"}),Object(v.jsx)("h2",{children:"Route"}),Object(v.jsx)(_e.a,{children:e.pathway.map((function(a,n){for(var r=!0,o=-1,c=0;c<a.length;c++)for(var s=0;s<e.mapData.length;s++)if(a[c][0].index===e.mapData[s].index?(r=!1,o=s,e.mapData[s].pathwayShape=!0):e.origin.index===e.mapData[s].index?e.mapData[s].origin=!0:e.destination.index===e.mapData[s].index&&(e.mapData[s].destination=!0),"building"===e.mapData[s].name){for(var d=0;d<e.mapData[s].internal.length;d++)for(var u=0;u<e.mapData[s].internal[d].length;u++)a[c][0].index===e.mapData[s].internal[d][u].index?(r=!0,e.mapData[s].internal[d][u].pathwayShape=!0,o=s):e.origin.index===e.mapData[s].internal[d][u].index?e.mapData[s].internal[d][u].origin=!0:e.destination.index===e.mapData[s].internal[d][u].index&&(e.mapData[s].internal[d][u].destination=!0);for(d=0;d<e.mapData[s].lifts.length;d++)a[c][0].index===e.mapData[s].lifts[d].index&&(e.mapData[s].lifts[d].pathwayShape=!0);for(d=0;d<e.mapData[s].stairs.length;d++)a[c][0].index===e.mapData[s].stairs[d].index&&(e.mapData[s].stairs[d].pathwayShape=!0)}if(r){var h=0,p=Math.ceil(Math.sqrt(e.mapData[o].internal.length)),j=-e.mapData[o].width-50+50,b=50,f=1;return Object(v.jsx)(l.a,{children:Object(v.jsx)(fe.e,{height:500,width:750,className:t.viewMapCanvas,draggable:!0,children:Object(v.jsx)(fe.b,{children:e.mapData[o].internal.map((function(t,a){return f>p?(f=1,j=50,b+=e.mapData[o].height+50):j+=e.mapData[o].width+50,f++,h++,Object(v.jsxs)(i.a.Fragment,{children:[Object(v.jsx)(fe.f,{x:j,y:b-20,text:"Floor "+h,fontSize:20,fontFamily:"Calibri"}),Object(v.jsx)(fe.d,{x:j,y:b,width:e.mapData[o].width,height:e.mapData[o].height,fill:e.categories[e.mapData[o].category].mainColour}),e.mapData[o].internal[h-1].map((function(t,a){var n=null,r=1;return t.search?n="#03b1fc":t.origin?n="#03fc0f":t.destination?n="#fc03ce":t.pathwayShape?n="#0000FF":(n=e.categories[t.category].mainColour,r=.6),Object(v.jsxs)(i.a.Fragment,{children:[Object(v.jsx)(fe.d,{x:t.x-e.mapData[o].x+j,y:t.y-e.mapData[o].y+b,width:t.width,height:t.height,fill:n,opacity:r}),Object(v.jsx)(fe.f,{x:t.x-e.mapData[o].x+j,y:t.y-e.mapData[o].y+b,text:t.label,width:t.width,height:t.height,fontSize:parseInt(t.fontSize),fontFamily:"Calibri",fill:e.categories[t.category].fontColour,verticalAlign:"middle",align:t.textAlign,opacity:r})]})})),e.mapData[o].lifts.map((function(t,a){var n=null;if(t.search?n="#03b1fc":t.origin?n="#03fc0f":t.destination?n="#fc03ce":t.pathwayShape?n="#0000FF":(n=e.categories[t.category].mainColour,.6),t.floors[h-1])return Object(v.jsx)(fe.d,{x:t.x-e.mapData[o].x+j,y:t.y-e.mapData[o].y+b,width:t.width,height:t.height,fill:n})})),e.mapData[o].stairs.map((function(t,a){if(t.search?"#03b1fc":t.origin?"#03fc0f":t.destination?"#fc03ce":t.pathwayShape?"#0000FF":(e.categories[t.category].mainColour,.6),t.floors[h-1])return Object(v.jsx)(fe.d,{x:t.x-e.mapData[o].x+j,y:t.y-e.mapData[o].y+b,width:t.width,height:t.height,fill:e.categories[t.category].mainColour})})),void 0!==e.mapData[o].entrance&&e.mapData[o].entrance.floorNumber===h-1&&Object(v.jsx)(fe.d,{x:e.mapData[o].entrance.x-e.mapData[o].x+j,y:e.mapData[o].entrance.y-e.mapData[o].y+b,width:e.mapData[o].entrance.width,height:e.mapData[o].entrance.height,fill:"#0000FF"})]})}))})})})}return Object(v.jsx)(l.a,{children:Object(v.jsx)(Ue,{height:500,width:750,clickHandler:function(){},showingResult:!0,shapes:e.mapData,categories:e.categories})})}))})]})})},tt=a(214);function at(e,t,a){for(var n=[],i=0;i<e.length;i++)"path"===e[i].name&&n.push(e[i]);n.push(t),n.push(a);for(var r=[],o=function(e,t){for(var a=[],n=0;n<e.length;n++)a.push([e[n],1/0,!1,null]);return a[function(e,t){for(var a=0;a<e.length;a++){if(st(e[a][0],t))return a}return-1}(a,t)][1]=0,a}(n,t);o.length;){ct(o);var c=o.shift();if(c[2]=!0,r.push(c),st(c[0],a))return r;rt(o,c)}return r}function nt(e,t,a){for(var n=[],i=function(e,t){for(var a=[],n=function(e,t){for(var a=0;a<e.length;a++)if("building"===e[a].name)for(var n=0;n<e[a].internal.length;n++)for(var i=0;i<e[a].internal[n].length;i++)if(e[a].internal[n][i].index===t.index)return e[a]}(e,t),i=0;i<n.internal.length;i++){a.push(ot(n.internal[i],t)),void 0!==n.entrance&&n.entrance.floorNumber===i&&a[i].push([n.entrance,1/0,!1,null]);for(var r=0;r<n.lifts.length;r++)n.lifts[r].floors[i]&&a[i].push([n.lifts[r],1/0,!1,null]);for(r=0;r<n.stairs.length;r++)n.stairs[r].floors[i]&&a[i].push([n.stairs[r],1/0,!1,null])}return a}(e,t),r=-1,o=-1,c=-1,l=0;l<i.length;l++)for(var s=0;s<i[l].length;s++)"entrance"===i[l][s][0].name?r=l:t.index===i[l][s][0].index&&(o=l,i[l][s][1]=0);var d=!0;if((c=o)!==r)for(d=!1;i[c].length;){if(ct(i[c]),(u=i[c].shift())[2]=!0,n.push(u),a){if("lifts"===u[0].name&&u[0].floors[r]){u[0];break}}else if("lifts"===u[0].name||"stairs"===u[0].name&&u[0].floors[r]){u[0];break}rt(i[c],u)}for(d&&t,rt(i[c=r],n[n.length-1]);i[c].length;){var u;if(ct(i[c]),(u=i[c].shift())[2]=!0,n.push(u),"entrance"===u[0].name)break;rt(i[c],u)}return n}function it(e){for(var t=[],a=e;null!==a;)t.unshift(a),a=a[3];return t}function rt(e,t){var a,n=function(e,t){for(var a=[],n=0;n<e.length;n++)t[0].index!==e[n][0].index&&Le(t[0],e[n][0])&&a.push(e[n]);return a}(e,t),i=Object(tt.a)(n);try{for(i.s();!(a=i.n()).done;){var r=a.value;r[1]=t[1]+1,r[3]=t}}catch(o){i.e(o)}finally{i.f()}}function ot(e,t){for(var a=[],n=0;n<e.length;n++)e[n].index!==t.index&&"room"===e[n].name||a.push([e[n],1/0,!1,null]);return a}function ct(e){e.sort(lt)}function lt(e,t){return e[1]<t[1]?-1:1}function st(e,t){return e.index===t.index}var dt=a(83),ut=a(72),ht=function(){var e=O(),t=Object(n.useState)(null),a=Object(c.a)(t,2),r=a[0],o=a[1],d=Object(n.useState)([]),p=Object(c.a)(d,2),j=p[0],f=p[1],g=Object(n.useState)(!1),x=Object(c.a)(g,2),m=x[0],y=x[1],S=Object(n.useState)(!1),k=Object(c.a)(S,2),P=k[0],D=k[1],N=Object(n.useState)(!1),F=Object(c.a)(N,2),M=F[0],B=F[1],R=Object(n.useState)(null),A=Object(c.a)(R,2),E=A[0],L=A[1],V=Object(n.useState)(null),z=Object(c.a)(V,2),X=z[0],H=z[1],W=Object(n.useState)(null),G=Object(c.a)(W,2),Y=G[0],K=G[1],J=Object(n.useState)(!1),q=Object(c.a)(J,2),U=q[0],$=q[1],Z=Object(n.useState)(!1),_=Object(c.a)(Z,2),ee=_[0],te=_[1],ae=Object(n.useState)(null),ne=Object(c.a)(ae,2),ie=ne[0],re=ne[1],oe=Object(n.useState)([]),ce=Object(c.a)(oe,2),le=ce[0],se=ce[1],de=Object(n.useState)(!1),ue=Object(c.a)(de,2),he=ue[0],pe=ue[1],je=Object(n.useState)([]),be=Object(c.a)(je,2),fe=be[0],ge=be[1],xe=Object(n.useState)(!0),me=Object(c.a)(xe,2),Oe=me[0],ve=me[1],ye=Object(n.useState)(""),we=Object(c.a)(ye,2),Ce=we[0],Se=we[1],ke=Object(n.useState)(""),Pe=Object(c.a)(ke,2),De=Pe[0],Ne=Pe[1],Fe=Object(n.useState)(!1),Me=Object(c.a)(Fe,2),Be=Me[0],Re=Me[1],Te=Object(n.useState)(!1),Ae=Object(c.a)(Te,2),Ee=Ae[0],Le=Ae[1];function Ie(){for(var e=r,t=0;t<e.length;t++)if(e[t].search=!1,e[t].origin=!1,e[t].destination=!1,e[t].pathwayShape=!1,"building"===e[t].name)for(var a=0;a<e[t].internal.length;a++)for(var n=0;n<e[t].internal[a].length;n++)"room"===e[t].internal[a][n].name&&(e[t].internal[a][n].search=!1,e[t].internal[a][n].origin=!1,e[t].internal[a][n].destination=!1,e[t].internal[a][n].pathwayShape=!1);o(Object(I.a)(e))}function Ve(e){0===e?(y(!1),D(!1),B(!1)):1===e?(y(!0),D(!0),B(!1)):2===e&&(y(!0),D(!1),B(!0))}function ze(){Ie();var e=Object(I.a)(r);if("building"===E.name)for(var t=0;t<e.length;t++)if(E.index===r[t].index){e[t].search=!0;break}if("room"===E.name)for(t=0;t<e.length;t++)if("building"===e[t].name)for(var a=0;a<e[t].internal.length;a++)for(var n=0;n<e[t].internal[a].length;n++)if(e[t].internal[a][n].index===E.index){e[t].internal[a][n].search=!0,re(e[t].index),te(!0);break}o(Object(I.a)(e)),$(!0)}function Xe(){if(Ie(),"building"===X.name&&"building"===Y.name){for(var e=!1,t=!1,a=Object(I.a)(r),n=0;n<a.length;n++)a[n].pathwayShape=!1;for(n=0;n<a.length&&(e||X.index!==r[n].index||(a[n].origin=!0,e=!0),t||Y.index!==r[n].index||(a[n].destination=!0,t=!0),!e||!t);n++);var i=at(r,X,Y),c=it(i[i.length-1]);for(n=0;n<c.length;n++)for(var l=0;l<a.length;l++)c[n][0].index===a[l].index&&c[n][0].name===a[l].name&&(a[l].pathwayShape=!0);return o(Object(I.a)(a)),void $(!0)}var s=[],d=null,u=null;for(n=0;n<r.length;n++)if("building"===r[n].name)for(l=0;l<r[n].internal.length;l++)for(var h=0;h<r[n].internal[l].length&&(null===d||null===u);h++)null===d&&X.index===r[n].internal[l][h].index?d=r[n]:null===u&&Y.index===r[n].internal[l][h].index&&(u=r[n]);if("room"===X.name&&"room"===Y.name){var p=nt(r,X);s.push(it(p[p.length-1])),p=at(r,d,u),s.push(it(p[p.length-1])),p=nt(r,Y),s.push(it(p[p.length-1]))}else if("room"===X.name&&"building"===Y.name){p=nt(r,X,Ee);s.push(it(p[p.length-1])),p=at(r,d,Y),s.push(it(p[p.length-1]))}else"building"===X.name&&"room"===Y.name&&(p=at(r,X,u),s.push(it(p[p.length-1])),p=nt(r,Y,Ee),s.push(it(p[p.length-1])));$(!0),pe(!0),ge([].concat(s))}function Ke(){Ve(0),Ie(),$(!1)}function qe(){return Object(v.jsxs)(i.a.Fragment,{children:[!m&&Object(v.jsxs)(i.a.Fragment,{children:[Object(v.jsxs)(He.a,{color:"primary",variant:"extended",className:e.paperComponent,onClick:function(){return Ve(1)},children:[Object(v.jsx)(Je.a,{style:{marginRight:1}}),"Search"]}),Object(v.jsx)("br",{}),Object(v.jsxs)(He.a,{color:"primary",variant:"extended",className:e.paperComponent,onClick:function(){return Ve(2)},children:[Object(v.jsx)(dt.a,{icon:ut.b,style:{fontSize:17,marginRight:5}}),"Find Route"]})]}),m&&P&&Object(v.jsxs)(i.a.Fragment,{children:[Object(v.jsxs)(He.a,{color:"secondary",variant:"extended",className:e.paperComponent,onClick:Ke,children:[Object(v.jsx)(dt.a,{icon:ut.a,style:{fontSize:17,marginRight:5}}),"Back"]}),Object(v.jsx)("br",{}),r&&Object(v.jsx)(Ye.a,{className:e.paperComponent,style:{width:300,backgroundColor:"white"},options:le,autoHighlight:!0,getOptionLabel:function(e){return e.label},renderOption:function(e){return e.label},onChange:function(e,t){L(t)},renderInput:function(e){return Object(v.jsx)(s.a,Object(Q.a)(Object(Q.a)({},e),{},{style:{padding:0,margin:0},label:"Search For A Building",variant:"outlined",inputProps:Object(Q.a)({},e.inputProps)}))}}),Object(v.jsxs)(He.a,{color:"primary",variant:"extended",className:e.paperComponent,onClick:ze,children:[Object(v.jsx)(Je.a,{style:{marginRight:1}}),"Search"]})]}),m&&M&&Object(v.jsxs)(i.a.Fragment,{children:[Object(v.jsxs)(He.a,{color:"secondary",variant:"extended",className:e.paperComponent,onClick:Ke,children:[Object(v.jsx)(dt.a,{icon:ut.a,style:{fontSize:17,marginRight:5}}),"Back"]}),Object(v.jsx)("br",{}),r&&Object(v.jsx)(Ye.a,{className:e.paperComponent,style:{width:300,backgroundColor:"white"},options:le,autoHighlight:!0,getOptionLabel:function(e){return e.label},renderOption:function(e){return e.label},onChange:function(e,t){H(t)},renderInput:function(e){return Object(v.jsx)(s.a,Object(Q.a)(Object(Q.a)({},e),{},{label:"Origin",variant:"outlined",inputProps:Object(Q.a)(Object(Q.a)({},e.inputProps),{},{autoComplete:"new-password"})}))}}),r&&Object(v.jsx)(Ye.a,{className:e.paperComponent,style:{width:300,backgroundColor:"white"},options:le,autoHighlight:!0,getOptionLabel:function(e){return e.label},renderOption:function(e){return e.label},onChange:function(e,t){K(t)},renderInput:function(e){return Object(v.jsx)(s.a,Object(Q.a)(Object(Q.a)({},e),{},{color:"primary",label:"Destination",variant:"outlined",inputProps:Object(Q.a)(Object(Q.a)({},e.inputProps),{},{autoComplete:"new-password"})}))}}),Object(v.jsx)(We.a,{className:e.paperComponent,control:Object(v.jsx)(Ge.a,{name:"checkedI",onChange:function(e){return Le(e.target.checked)},color:"primary"}),label:"Step Free Access"}),Object(v.jsx)("br",{}),Object(v.jsxs)(He.a,{color:"primary",variant:"extended",className:e.paperComponent,onClick:Xe,children:[Object(v.jsx)(dt.a,{icon:ut.b,style:{fontSize:17,marginRight:5}}),"Get Directions"]})]})]})}Object(n.useEffect)((function(){ee||null===r||($(!1),Ie())}),[ee,he]);var Ze=Object(w.a)(),_e=Object(C.a)(Ze.breakpoints.down("sm"));return Object(v.jsxs)(i.a.Fragment,{children:[Object(v.jsx)(T,{}),Object(v.jsxs)("div",{style:{marginTop:56},children:[!Oe&&Object(v.jsxs)(i.a.Fragment,{children:[!_e&&Object(v.jsx)("div",{className:e.paper,children:qe()}),Object(v.jsx)(Ue,{clickHandler:function(e){for(var t=0;t<r.length;t++)if(r[t].index===e){re(t),te(!0);break}},showingResult:U,shapes:r,categories:j}),ee&&Object(v.jsx)(Qe,{handleClose:function(){te(!1)},building:r[ie],categories:j,showingResult:U}),he&&Object(v.jsx)(et,{pathway:fe,origin:X,destination:Y,mapData:r,categories:j,handleClose:function(){pe(!1)}}),null!==j&&Object(v.jsx)($e,{categories:j}),_e&&!Be&&Object(v.jsx)(u.a,{style:{position:"absolute",bottom:0,width:"100%"},variant:"contained",color:"primary",onClick:function(){return Re(!0)},children:"Search"}),_e&&Be&&Object(v.jsx)(h.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:!0,onClose:function(){return Re(!1)},children:Object(v.jsxs)("div",{className:e.modalContent,children:[Object(v.jsx)(u.a,{onClick:function(){return Re(!1)},style:{position:"absolute",top:0,right:0,margin:10},children:"X"}),Object(v.jsx)(l.a,{className:e.centerPaper,children:qe()})]})})]}),Oe&&Object(v.jsx)(h.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:!0,id:"enterCodeModal",children:Object(v.jsxs)("div",{className:e.modalContent,children:[Object(v.jsx)("h2",{children:"Enter Code"}),Object(v.jsx)(s.a,{error:""!==De,helperText:De,className:e.formTextfield,id:"enterMapCode",label:"Enter Code",variant:"outlined",onChange:function(e){return Se(e.target.value)}}),Object(v.jsx)("br",{}),Object(v.jsx)(u.a,{style:{marginLeft:7},id:"retrieveMap",variant:"contained",color:"primary",onClick:function(){if(Ne(""),6===Ce.length){var e=b.database();e.ref("MapData/").orderByChild("code").equalTo(Ce).on("value",(function(t){t.exists()?t.forEach((function(t){e.ref("MapData/"+t.key).on("value",(function(e){var t=e.val();if(null!==t&&t.active){for(var a=0,n=[],i=0;i<t.mapData.length;i++)if("building"===t.mapData[i].name){n.push(t.mapData[i]);for(var r=0;r<t.mapData[i].internal.length;r++)if("empty"===t.mapData[i].internal[r][0])t.mapData[i].internal[r]=[];else for(var c=0;c<t.mapData[i].internal[r].length;c++)"room"===t.mapData[i].internal[r][c].name&&n.push(t.mapData[i].internal[r][c]);"empty"===t.mapData[i].lifts[0]&&(t.mapData[i].lifts=[]),"empty"===t.mapData[i].stairs[0]&&(t.mapData[i].stairs=[])}for(i=0;i<t.mapData.length;i++)if(t.mapData[i].index=a++,"building"===t.mapData[i].name){void 0!==t.mapData[i].entrance&&(t.mapData[i].entrance.index=a++);for(r=0;r<t.mapData[i].internal.length;r++)for(c=0;c<t.mapData[i].internal[r].length;c++)t.mapData[i].internal[r][c].index=a++;for(r=0;r<t.mapData[i].lifts.length;r++)t.mapData[i].lifts[r].index=a++;for(r=0;r<t.mapData[i].stairs.length;r++)t.mapData[i].stairs[r].index=a++}o(Object(I.a)(t.mapData)),f(Object(I.a)(t.categories)),se([].concat(n)),ve(!1)}}))})):Ne("Map not Found")}))}else Ne("Invalid Map Code")},children:"Retrieve Map"})]})})]})]})},pt=a(439),jt=a(513),bt=a(512),ft=a(500),gt=a(216),xt=a.n(gt),mt=function(e){var t=O(),a=Object(n.useState)([]),r=Object(c.a)(a,2),o=r[0],s=r[1],d=Object(n.useState)(!1),h=Object(c.a)(d,2),j=h[0],f=h[1],x=Object(n.useState)(!1),m=Object(c.a)(x,2),y=m[0],w=m[1],C=g.use();return Object(n.useEffect)((function(){ze(null);var e=b.database(),t=e.ref("MapData/");null!==C&&t.orderByChild("userID").equalTo(C.uid).on("value",(function(t){var a=[];t.forEach((function(t){e.ref("MapData/"+t.key).on("value",(function(e){a.push([t.key,e.val()]),s([].concat(a))}))}))}))}),[]),Object(v.jsxs)(i.a.Fragment,{children:[Object(v.jsxs)(l.a,{className:t.centerPaper,children:[function(){if(j)return Object(v.jsx)(p.a,{to:"/createmap"})}(),Object(v.jsx)("h2",{children:"Admin"}),Object(v.jsx)(V.a,{component:l.a,elevation:5,children:Object(v.jsxs)(z.a,{id:"mapListTable",className:t.table,children:[Object(v.jsx)(X.a,{children:Object(v.jsxs)(H.a,{children:[Object(v.jsx)(W.a,{align:"center",children:"Name"}),Object(v.jsx)(W.a,{align:"center",children:"Code"}),Object(v.jsx)(W.a,{align:"center",children:"Created On"}),Object(v.jsx)(W.a,{align:"center",children:"Last Updated"}),Object(v.jsx)(W.a,{align:"center",children:"Active"}),Object(v.jsx)(W.a,{align:"center"}),Object(v.jsx)(W.a,{align:"center"})]})}),Object(v.jsx)(G.a,{children:o.map((function(e,t){if(null!==e[1])return Object(v.jsxs)(H.a,{id:"mapRow"+t,children:[Object(v.jsx)(W.a,{id:"mapRow"+t+"Name",component:"th",scope:"row",children:e[1].mapName}),Object(v.jsx)(W.a,{id:"mapRow"+t+"Code",component:"th",scope:"row",children:e[1].code}),Object(v.jsx)(W.a,{id:"mapRow"+t+"Created",component:"th",scope:"row",children:e[1].createdDate}),Object(v.jsx)(W.a,{id:"mapRow"+t+"Updated",component:"th",scope:"row",children:e[1].updatedDate}),Object(v.jsx)(W.a,{id:"mapRow"+t+"Active",component:"th",scope:"row",children:Object(v.jsx)(Ge.a,{checked:e[1].active,onChange:function(){!function(e){for(var t=b.database(),a=!1,n=0;n<o.length;n++)if(o[n][0]===e){a=o[n][1].active;break}t.ref("MapData/"+e).update({active:!a})}(e[0])},name:"active"})}),Object(v.jsx)(W.a,{id:"mapRow"+t+"EditButton",component:"th",scope:"row",children:Object(v.jsx)(pt.a,{title:"Edit Map",placement:"bottom",arrow:!0,children:Object(v.jsx)(u.a,{onClick:function(){!function(e){for(var t=0;t<o.length;t++)if(o[t][0]===e){ze(o[t]),f(!0);break}}(e[0])},variant:"contained",children:Object(v.jsx)(he.a,{fontSize:"small"})})})}),Object(v.jsx)(W.a,{id:"mapRow"+t+"DeleteButton",component:"th",scope:"row",children:Object(v.jsx)(pt.a,{title:"Delete Map",placement:"bottom",arrow:!0,children:Object(v.jsx)(u.a,{onClick:function(){return function(e){b.database().ref("MapData/"+e).remove();for(var t=o,a=0;a<t.length;a++)if(t[a][0]===e){t.splice(a);break}s(Object(I.a)(t))}(e[0])},variant:"contained",children:Object(v.jsx)(dt.a,{icon:ut.c,style:{margin:"auto",color:"#FF0000",fontSize:17}})})})})]},"mapRow"+t)}))})]})})]}),Object(v.jsx)(jt.a,{ariaLabel:"",id:"speedDialButton",className:t.speedDial,icon:Object(v.jsx)(bt.a,{}),onClose:function(){return w(!1)},onOpen:function(){return w(!0)},onClick:function(){return w(!0)},open:y,direction:"up",children:Object(v.jsx)(ft.a,{button:!0,id:"createNewMap",icon:Object(v.jsx)(xt.a,{}),tooltipTitle:"Create New Map",onClick:function(){ze(null),f(!0)}},"New Map")})]})},Ot=function(e){var t=A();return Object(v.jsxs)("div",{className:t.page,children:[function(){if(null===g.use())return Object(v.jsx)(p.a,{to:"/"})}(),Object(v.jsx)(T,{}),Object(v.jsx)(mt,{})]})},vt=a(86);var yt=function(){return Object(v.jsx)("div",{className:"App",children:Object(v.jsxs)(vt.a,{children:[Object(v.jsx)(p.d,{children:Object(v.jsx)(p.b,{path:"/createmap",children:Object(v.jsx)(Xe,{})})}),Object(v.jsx)(p.d,{children:Object(v.jsx)(p.b,{path:"/viewmap",children:Object(v.jsx)(ht,{})})}),Object(v.jsx)(p.d,{children:Object(v.jsx)(p.b,{path:"/admin",children:Object(v.jsx)(Ot,{})})}),Object(v.jsx)(p.d,{children:Object(v.jsx)(p.b,{path:"/",exact:!0,children:Object(v.jsx)(E,{})})})]})})},wt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,516)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,r=t.getLCP,o=t.getTTFB;a(e),n(e),i(e),r(e),o(e)}))};o.a.render(Object(v.jsx)(yt,{}),document.getElementById("root")),wt()}},[[429,1,2]]]);
//# sourceMappingURL=main.1ceee935.chunk.js.map